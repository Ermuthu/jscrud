<!DOCTYPE html>

<html>
	<head>
		<script>

		// a function 

		// Create, Read, Update, Delete methods will have to be supported
		// as items are created they will first have to be indexed

		// added comments so I can do a second commit
		var holder = {};

		var indices = {};

		var indexObject = function(item){
			var uid=Object.keys(holder).length;
			holder[uid] = item;

			for (key in item){
				if (!(key in indices)){
					// this is the first time the program has encountered this key, create an index in indices for it
					indices[key] = {};
				};
				// the index for each key now definitely exists
				var indx = indices[key];
				var value=item[key];

				if (value in indx){
					// the name is already in the index, add item's uid to index array
					indx[value].push(uid);
				} else {
					// this is the first time the name has been encountered, create a new array with this name by itself
					indx[value] = [uid];
				}	
			}
		};

		var matchObject = function(item){
			var indxHits = [];
			for (key in item){
				var value = item[key];
				alert(value);
				if (key in indices){
					// if there is an index defined for the matching object, push the uid's in the index array and into the indxHits array
					var indx = indices[key];
					var hit = indx[value];
					indxHits.push(hit);
				} else {
					// there is no index defined for some key in the matching object, therefore there is no match, return out of the loop
					return undefined;
				}
			}
			// test returned index hits; a uid must be present in all of them to be considered a match
			// return the matched records
			// for now, return just the indxHits array, it will be tested for set membership later
			return indxHits;
		}



		var createRecord = function(item){
			indexObject(item);

		};

		var deleteRecord = function(item){
			// find the object's uid by 
		}




		var moshe = {first:'moshe', last:'bildner'};
		var luke = {first:'moshe', last:'trapp'};
		
		// testing code

		createRecord(moshe);
		createRecord(luke);

		alert(matchObject(luke));


		alert(matchObject({
			first:'moshe',
			middle:'hillel',
			last:'bildner'
		}));


		</script>
	

	</head>


</html>
